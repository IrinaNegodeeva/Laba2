


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             |.text|, CODE, READONLY
    2 00000000         
    3 00000000         array_sum_asm
                               PROC                         ; –ù–∞—á–∞–ª–æ —Ñ—É
                                                            –Ω–∫—Ü–∏–∏ array_su
                                                            m_asm
    4 00000000                 EXPORT           array_sum_asm
    5 00000000         ; –§—É–Ω–∫—Ü–∏—è (–ø—Ä–æ—Ü–µ–¥—É—Ä–∞) —Ä–µ–∞–ª–∏–∑—É–µ—Ç
                        —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ 
    6 00000000         ; –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å –
                       Ω–∞ –º–∞—Å—Å–∏–≤ —á–µ—Ä–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä R0
    7 00000000         ; —Ä–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–∞ —á–µ—Ä–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä 
                       R1.
    8 00000000         ; –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏ –≤–æ–∑–
                       ≤—Ä–∞—â–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä R0
    9 00000000         ; R0 = *array
   10 00000000         ; R1 = size(array)
   11 00000000         ; return R0= sum_array
   12 00000000 F04F 0200       MOV              R2, #0      ; –í —Ä–µ–≥–∏—Å—Ç—Ä
                                                            –µ R2 –±—É–¥–µ–º —Ö
                                                            —Ä–∞–Ω–∏—Ç—å –Ω–æ–º
                                                            –µ—Ä —ç–ª–µ–º–µ–Ω—Ç
                                                            –∞ –º–∞—Å—Å–∏–∞
   13 00000004 F04F 0300       MOV              R3, #0      ; –í —Ä–µ–≥–∏—Å—Ç—Ä
                                                            –µ R3 –±—É–¥–µ–º —Ö
                                                            —Ä–∞–Ω–∏—Ç—å —Å—É–º
                                                            –º—É —ç–ª–µ–º–µ–Ω—Ç
                                                            –æ–≤ –º–∞—Å—Å–∏–∞
   14 00000008 F04F 0404       MOV              R4, #4      ; –†–∞–∑–º–µ—Ä –æ–¥
                                                            –Ω–æ–≥–æ —ç–ª–µ–º–µ
                                                            –Ω—Ç–∞ –º–∞—Å—Å–∏–≤
                                                            –∞ = 4 –±–∞–π—Ç–∞–º
                                                            , 
   15 0000000C FB01 F104       MUL              R1, R4      ; –ø–æ—ç—Ç–æ–º—É —É
                                                            –º–Ω–æ–∂–∞–µ–º –∫–æ
                                                            –ª-–≤–æ —ç–ª–µ–º–µ–
                                                            Ω—Ç–æ–≤ –º–∞—Å—Å–∏–
                                                            ≤–∞ –Ω–∞ 4.
   16 00000010         sum
   17 00000010 428A            CMP              R2,R1       ; –ü—Ä–æ–≤–µ—Ä–∫–∞ 
                                                            R2 > R1
   18 00000012 DB00            BLT              calc        ; –ï—Å–ª–∏ R2 < R1,
                                                             –ø–µ—Ä–µ—Ö–æ–¥–∏–º
                                                             –≤ "CAL–°"
   19 00000014 E004            B                exit        ; E—Å–ª–∏ R2 > R1, 
                                                            –≤—ã—Ö–æ–¥–∏–º –∏–∑
                                                             –ø—Ä–æ–≥—Ä–∞–º–º—ã
                                                            
   20 00000016         calc
   21 00000016 5884            LDR              R4, [R0,R2] ; –°—á–∏—Ç–∞—Ç—å —Å
                                                            –æ–¥–µ—Ä–∂–∏–º–æ–µ 
                                                            —ç–ª–µ–º–µ–Ω—Ç–∞ –º
                                                            –∞—Å—Å–∏–≤–∞ —Å–æ —
                                                            Å–º–µ—â–µ–Ω–∏–µ–º –
                                                            ≤ R2
   22 00000018 4423            ADD              R3,R3,R4    ; R3 = R3 + R4
   23 0000001A F102 0204       ADD              R2,#4
   24 0000001E E7F7            B                sum
   25 00000020         exit



ARM Macro Assembler    Page 2 


   26 00000020 4618            MOV              R0, R3
   27 00000022 4770            BX               LR
   28 00000024                 ENDP                         ; –ö–æ–Ω–µ—Ü —Ñ—É–Ω
                                                            –∫—Ü–∏–∏ array_sum_
                                                            asm
   29 00000024         
   30 00000024         
   31 00000024         array_treatment_asm
                               PROC                         ; –ù–∞—á–∞–ª–æ —Ñ—É
                                                            –Ω–∫—Ü–∏–∏ array_tr
                                                            eatment_asm
   32 00000024                 EXPORT           array_treatment_asm
   33 00000024         ; –§—É–Ω–∫—Ü–∏—è (–ø—Ä–æ—Ü–µ–¥—É—Ä–∞) —Ä–µ–∞–ª–∏–∑—É–µ—Ç
                        –æ–±—Ä–∞–±–æ—Ç–∫—É –º–∞—Å—Å–∏–≤–∞ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç
                       –≤–∏–∏ —Å –∑–∞–¥–∞–Ω–∏–µ–º 
   34 00000024         ; –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å –
                       Ω–∞ –º–∞—Å—Å–∏–≤ —á–µ—Ä–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä R0,
   35 00000024         ; —Ä–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–∞ —á–µ—Ä–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä 
                       R1,
   36 00000024         ; —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ —á–µ
                       —Ä–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä R2
   37 00000024         ; R0 = *array
   38 00000024         ; R1 = size(array)
   39 00000024         ; R2 = *new_array 
   40 00000024 F04F 0300       MOV              R3, #0      ; –í —Ä–µ–≥–∏—Å—Ç—Ä
                                                            –µ R3 –±—É–¥–µ–º —Ö
                                                            —Ä–∞–Ω–∏—Ç—å –Ω–æ–º
                                                            –µ—Ä —ç–ª–µ–º–µ–Ω—Ç
                                                            –∞ –º–∞—Å—Å–∏–∞
   41 00000028 F04F 0400       MOV              R4, #0      ; –í —Ä–µ–≥–∏—Å—Ç—Ä
                                                            –µ R4 –±—É–¥–µ–º —Ö
                                                            —Ä–∞–Ω–∏—Ç—å —Å—É–º
                                                            –º—É —ç–ª–µ–º–µ–Ω—Ç
                                                            –æ–≤ –º–∞—Å—Å–∏–∞
   42 0000002C         
   43 0000002C         ; –í—ã–∑—ã–≤–∞–µ–º –ø—Ä–æ—Ü–µ–¥—É—Ä—É –≤—ã—á–∏—Å–ª–µ–Ω–∏
                       —è —Å—É–º–º—ã –º–∞—Å—Å–∏–≤–∞
   44 0000002C B50F            PUSH             {R0-R3, LR} ; –∑–∞–ø–∏—Å—ã–≤–∞–
                                                            µ–º –≤—Å–µ –Ω–µ–æ–±
                                                            —Ö–æ–¥–∏–º—ã–µ —Ä–µ
                                                            –≥–∏—Å—Ç—Ä—ã –≤ —Å—
                                                            Ç–µ–∫, –Ω–µ–æ–±—Ö–æ
                                                            –¥–∏–º—ã–µ –¥–ª—è –
                                                            ø—Ä–æ—Ü–µ–¥—É—Ä—ã a
                                                            rray_treatment_asm
   45 0000002E         ; –≤ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ö R0 –∏ R1 —É–∂–µ –ª–µ–∂–∏—Ç –Ω–µ–
                       æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏
                       —è —Å—É–º–º—ã
   46 0000002E F7FF FFFE       BL               array_sum_asm
   47 00000032 4604            MOV              R4, R0      ; –∑–∞–ø–∏—Å—å —Å—É
                                                            –º–º—ã –º–∞—Å—Å–∏–≤
                                                            –∞ –≤ —Ä–µ–≥–∏—Å—Ç—
                                                            Ä R4
   48 00000034 E8BD 400F       POP              {R0-R3, LR} ; –≤–æ–∑–≤—Ä–∞—â–∞–
                                                            µ–º –∑–∞–ø–∏—Å–∞–Ω–
                                                            Ω—ã–µ —Ä–∞–Ω–µ–µ —Ä
                                                            –µ–≥–∏—Å—Ç—Ä—ã –∏–∑
                                                             —Å—Ç–µ–∫–∞
   49 00000038         



ARM Macro Assembler    Page 3 


   50 00000038 F04F 0504       MOV              R5, #4      ; –†–∞–∑–º–µ—Ä –æ–¥
                                                            –Ω–æ–≥–æ —ç–ª–µ–º–µ
                                                            –Ω—Ç–∞ –º–∞—Å—Å–∏–≤
                                                            –∞ = 4 –±–∞–π—Ç–∞–º
                                                            , 
   51 0000003C FB01 F105       MUL              R1, R5      ; –ø–æ—ç—Ç–æ–º—É —É
                                                            –º–Ω–æ–∂–∞–µ–º –∫–æ
                                                            –ª-–≤–æ —ç–ª–µ–º–µ–
                                                            Ω—Ç–æ–≤ –º–∞—Å—Å–∏–
                                                            ≤–∞ –Ω–∞ 4.
   52 00000040         
   53 00000040         ;–ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏ –ø—Ä–æ–∏—Å—Ö–æ
                       –¥–∏—Ç –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–
                       µ–Ω–∏–∏ –ø–µ—Ä–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞. 
   54 00000040         ;–ü–æ—ç—Ç–æ–º—É –º—ã –∑–∞–ø–∏—à–µ–º –≤ –Ω—É–ª–µ–≤–æ–π —ç
                       –ª–µ–º–µ–Ω—Ç –º–∞—Å—Å–∏–≤–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–
                       ∏—Å–ª–æ —Ç–∏–ø–∞ int32_t = 2 147 483 647
   55 00000040 F06F 4500       MOV              R5, #2147483647
   56 00000044 50D5            STR              R5, [R2,R3]
   57 00000046         
   58 00000046 F103 0304       ADD              R3,#4       ; —Å–º–µ—â–∞–µ–º –æ
                                                            —Ç–Ω–æ—Å–∏—Ç–µ–ª—å–
                                                            Ω—ã–π –∞–¥—Ä–µ—Å –º
                                                            –∞—Å—Å–∏–≤–∞
   59 0000004A         
   60 0000004A         treatment
   61 0000004A 428B            CMP              R3,R1       ; –ü—Ä–æ–≤–µ—Ä–∫–∞ 
                                                            R3 > R1
   62 0000004C DB00            BLT              treatment_calc ; –ï—Å–ª–∏ R2 < 
                                                            R1, –ø–µ—Ä–µ—Ö–æ–¥–
                                                            ∏–º –≤ "CAL–°"
   63 0000004E E007            B                exit_treatment ; E—Å–ª–∏ R2 > R
                                                            1, –≤—ã—Ö–æ–¥–∏–º –
                                                            ∏–∑ –ø—Ä–æ–≥—Ä–∞–º–
                                                            º—ã
   64 00000050         
   65 00000050         treatment_calc
   66 00000050         
   67 00000050 EA4F 06A3       ASR              R6, R3, #2
   68 00000054 FB94 F5F6       SDIV             R5, R4, R6
   69 00000058 50D5            STR              R5, [R2,R3]
   70 0000005A F103 0304       ADD              R3,#4       ; —Å–º–µ—â–∞–µ–º –æ
                                                            —Ç–Ω–æ—Å–∏—Ç–µ–ª—å–
                                                            Ω—ã–π –∞–¥—Ä–µ—Å –º
                                                            –∞—Å—Å–∏–≤–∞
   71 0000005E E7F4            B                treatment
   72 00000060         
   73 00000060         exit_treatment
   74 00000060 4770            BX               LR          ; –í–æ–∑–≤—Ä–∞—â–∞–
                                                            µ–º—Å—è –Ω–∞–∑–∞–¥ 
                                                            –ø–æ –∞–¥—Ä–µ—Å—É —
                                                            Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω
                                                            –Ω–æ–º—É –≤ —Ä–µ–≥–
                                                            ∏—Å—Ç—Ä–µ LR
   75 00000062                 ENDP                         ; –ö–æ–Ω–µ—Ü —Ñ—É–Ω
                                                            –∫—Ü–∏–∏ array_trea
                                                            tment_asm
   76 00000062         
   77 00000062                 END                          ; –ö–æ–Ω–µ—Ü —Ñ–∞–π



ARM Macro Assembler    Page 4 


                                                            –ª–∞
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M3 --apcs=interw
ork --depend=.\objects\main_1.d -o.\objects\main_1.o -I.\RTE\_Target_1 -IC:\Use
rs\tima0\AppData\Local\Arm\Packs\Keil\STM32F1xx_DFP\2.3.0\Device\Include -IC:\K
eil_v5\ARM\CMSIS\Include --predefine="__EVAL SETA 1" --predefine="__UVISION_VER
SION SETA 529" --predefine="STM32F10X_MD SETA 1" --list=.\listings\main_1.lst m
ain_1.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 1 in file main_1.s
   Uses
      None
Comment: .text unused
array_sum_asm 00000000

Symbol: array_sum_asm
   Definitions
      At line 3 in file main_1.s
   Uses
      At line 4 in file main_1.s
      At line 46 in file main_1.s

array_treatment_asm 00000024

Symbol: array_treatment_asm
   Definitions
      At line 31 in file main_1.s
   Uses
      At line 32 in file main_1.s
Comment: array_treatment_asm used once
calc 00000016

Symbol: calc
   Definitions
      At line 20 in file main_1.s
   Uses
      At line 18 in file main_1.s
Comment: calc used once
exit 00000020

Symbol: exit
   Definitions
      At line 25 in file main_1.s
   Uses
      At line 19 in file main_1.s
Comment: exit used once
exit_treatment 00000060

Symbol: exit_treatment
   Definitions
      At line 73 in file main_1.s
   Uses
      At line 63 in file main_1.s
Comment: exit_treatment used once
sum 00000010

Symbol: sum
   Definitions
      At line 16 in file main_1.s
   Uses
      At line 24 in file main_1.s
Comment: sum used once
treatment 0000004A




ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

Symbol: treatment
   Definitions
      At line 60 in file main_1.s
   Uses
      At line 71 in file main_1.s
Comment: treatment used once
treatment_calc 00000050

Symbol: treatment_calc
   Definitions
      At line 65 in file main_1.s
   Uses
      At line 62 in file main_1.s
Comment: treatment_calc used once
9 symbols
342 symbols in table
